---

- hosts: all
  become: yes
  gather_facts: no
  tasks:
  - name: Clearing the cache
    shell: sync; echo 3 > /proc/sys/vm/drop_caches
    register: caches_clean
  tags:
    - always


- name: Vanilla
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/vanilla, when: caches_clean, tags: ['never','vanilla'],
        setup_res_dir: "t00_vanilla"
      }

- name: Strace
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/strace, when: caches_clean, tags: ['never','strace'],
        setup_res_dir: "strace"
      }

# -------

- name: CatBpf (MinHash)
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/catbpf, when: caches_clean, tags: ['never','catbpf_minhash'],
        setup_res_dir: "catbpf_minhash"
      }

- name: CatBpf (Text)
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/catbpf, when: caches_clean, tags: ['never','catbpf_text'],
        catbpf_flags: "--stats -c 4 --text",
        setup_res_dir: "catbpf_text"
      }

# ------

- name: DIO (FILE - filter_nowait_plain)
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/dio, when: caches_clean, tags: ['never','dio_file_filter_nowait_plain'],
        setup_res_dir: "dio_file_filter_nowait_plain",
        dio_eswriter_enabled: false,
        dio_filewriter_enabled: true,
        dio_tareget_events: ["open", "openat", "creat", "read", "pread64", "write", "pwrite64"],
        dio_wait_timeout: 0,
        dio_content_form: "plain",
        dio_prof_on: true
      }

- name: DIO (FILE - filter_nowait)
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/dio, when: caches_clean, tags: ['never','dio_file_filter_nowait'],
        setup_res_dir: "dio_file_filter_nowait",
        dio_eswriter_enabled: false,
        dio_filewriter_enabled: true,
        dio_tareget_events: ["open", "openat", "creat", "read", "pread64", "write", "pwrite64"],
        dio_wait_timeout: 0,
        dio_prof_on: true
      }

- name: DIO (FILE - filter)
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/dio, when: caches_clean, tags: ['never','dio_file_filter'],
        setup_res_dir: "dio_file_filter",
        dio_eswriter_enabled: false,
        dio_filewriter_enabled: true,
        dio_tareget_events: ["open", "openat", "creat", "read", "pread64", "write", "pwrite64"],
        dio_wait_timeout: -1,
        dio_prof_on: true
      }

- name: DIO (FILE - all)
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/dio, when: caches_clean, tags: ['never','dio_file_all'],
        setup_res_dir: "dio_file_all",
        dio_eswriter_enabled: false,
        dio_filewriter_enabled: true,
        dio_tareget_events: ["all"],
        dio_wait_timeout: -1,
        dio_prof_on: true
      }


# ------NORMAL

# -------- NULL

- name: DIO (NULL - raw)
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/dio, when: caches_clean, tags: ['never','dio_null_raw'],
        setup_res_dir: "t01_dio_null_raw",
        dio_eswriter_enabled: false,
        dio_filewriter_enabled: false,
        dio_tareget_events: ["all"],
        dio_wait_timeout: -1,
        dio_prof_on: true,
        dio_prof_times: false,
        dio_detailed_data: false
      }

- name: DIO (NULL - detailed)
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/dio, when: caches_clean, tags: ['never','dio_null_detailed'],
        setup_res_dir: "t02_dio_null_detailed",
        dio_eswriter_enabled: false,
        dio_filewriter_enabled: false,
        dio_tareget_events: ["all"],
        dio_wait_timeout: -1,
        dio_prof_on: true,
        dio_prof_times: false,
        dio_detailed_data: true,
        dio_detail_with_content: "off",
        dio_detail_with_arg_paths: false,
        dio_detail_with_sock_addr: false,
        dio_detail_with_sock_data: false,
      }

- name: DIO (NULL - detailed_paths)
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/dio, when: caches_clean, tags: ['never','dio_null_detailed_paths'],
        setup_res_dir: "t03_dio_null_detailed_paths",
        dio_eswriter_enabled: false,
        dio_filewriter_enabled: false,
        dio_tareget_events: ["all"],
        dio_wait_timeout: -1,
        dio_prof_on: true,
        dio_prof_times: false,
        dio_detailed_data: true,
        dio_detail_with_content: "off",
        dio_detail_with_arg_paths: true,
        dio_detail_with_sock_addr: false,
        dio_detail_with_sock_data: false,
      }

- name: DIO (NULL - detailed_all)
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/dio, when: caches_clean, tags: ['never','dio_null_detailed_all'],
        setup_res_dir: "t04_dio_null_detailed_all",
        dio_eswriter_enabled: false,
        dio_filewriter_enabled: false,
        dio_tareget_events: ["all"],
        dio_wait_timeout: -1,
        dio_prof_on: true,
        dio_prof_times: false,
        dio_detailed_data: true,
        dio_detail_with_content: "off",
        dio_detail_with_arg_paths: true,
        dio_detail_with_sock_addr: true,
        dio_detail_with_sock_data: true,
      }

- name: DIO (NULL - detailed_all_plain)
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/dio, when: caches_clean, tags: ['never','dio_null_detailed_all_plain'],
        setup_res_dir: "t05_dio_null_detailed_all_plain",
        dio_eswriter_enabled: false,
        dio_filewriter_enabled: false,
        dio_tareget_events: ["all"],
        dio_wait_timeout: -1,
        dio_prof_on: true,
        dio_prof_times: false,
        dio_detailed_data: true,
        dio_detail_with_content: "plain",
        dio_detail_with_arg_paths: true,
        dio_detail_with_sock_addr: true,
        dio_detail_with_sock_data: true,
      }

- name: DIO (NULL - detailed_all_khash)
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/dio, when: caches_clean, tags: ['never','dio_null_detailed_all_khash'],
        setup_res_dir: "t06_dio_null_detailed_all_khash",
        dio_eswriter_enabled: false,
        dio_filewriter_enabled: false,
        dio_tareget_events: ["all"],
        dio_wait_timeout: -1,
        dio_prof_on: true,
        dio_prof_times: false,
        dio_detailed_data: true,
        dio_detail_with_content: "kernel_hash",
        dio_detail_with_arg_paths: true,
        dio_detail_with_sock_addr: true,
        dio_detail_with_sock_data: true,
      }

# -------- FILE

- name: DIO (File - raw)
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/dio, when: caches_clean, tags: ['never','dio_file_raw'],
        setup_res_dir: "t01_dio_file_raw",
        dio_eswriter_enabled: false,
        dio_filewriter_enabled: true,
        dio_tareget_events: ["all"],
        dio_wait_timeout: -1,
        dio_prof_on: true,
        dio_prof_times: false,
        dio_detailed_data: false
      }

- name: DIO (File - detailed)
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/dio, when: caches_clean, tags: ['never','dio_file_detailed'],
        setup_res_dir: "t02_dio_file_detailed",
        dio_eswriter_enabled: false,
        dio_filewriter_enabled: true,
        dio_tareget_events: ["all"],
        dio_wait_timeout: -1,
        dio_prof_on: true,
        dio_prof_times: false,
        dio_detailed_data: true,
        dio_detail_with_content: "off",
        dio_detail_with_arg_paths: false,
        dio_detail_with_sock_addr: false,
        dio_detail_with_sock_data: false,
      }

- name: DIO (File - detailed_paths)
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/dio, when: caches_clean, tags: ['never','dio_file_detailed_paths'],
        setup_res_dir: "t03_dio_file_detailed_paths",
        dio_eswriter_enabled: false,
        dio_filewriter_enabled: true,
        dio_tareget_events: ["all"],
        dio_wait_timeout: -1,
        dio_prof_on: true,
        dio_prof_times: false,
        dio_detailed_data: true,
        dio_detail_with_content: "off",
        dio_detail_with_arg_paths: true,
        dio_detail_with_sock_addr: false,
        dio_detail_with_sock_data: false,
      }

- name: DIO (File - detailed_all)
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/dio, when: caches_clean, tags: ['never','dio_file_detailed_all'],
        setup_res_dir: "t04_dio_file_detailed_all",
        dio_eswriter_enabled: false,
        dio_filewriter_enabled: true,
        dio_tareget_events: ["all"],
        dio_wait_timeout: -1,
        dio_prof_on: true,
        dio_prof_times: false,
        dio_detailed_data: true,
        dio_detail_with_content: "off",
        dio_detail_with_arg_paths: true,
        dio_detail_with_sock_addr: true,
        dio_detail_with_sock_data: true,
      }

- name: DIO (File - detailed_all_plain)
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/dio, when: caches_clean, tags: ['never','dio_file_detailed_all_plain'],
        setup_res_dir: "t05_dio_file_detailed_all_plain",
        dio_eswriter_enabled: false,
        dio_filewriter_enabled: true,
        dio_tareget_events: ["all"],
        dio_wait_timeout: -1,
        dio_prof_on: true,
        dio_prof_times: false,
        dio_detailed_data: true,
        dio_detail_with_content: "plain",
        dio_detail_with_arg_paths: true,
        dio_detail_with_sock_addr: true,
        dio_detail_with_sock_data: true,
      }

- name: DIO (File - detailed_all_khash)
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/dio, when: caches_clean, tags: ['never','dio_file_detailed_all_khash'],
        setup_res_dir: "t06_dio_file_detailed_all_khash",
        dio_eswriter_enabled: false,
        dio_filewriter_enabled: true,
        dio_tareget_events: ["all"],
        dio_wait_timeout: -1,
        dio_prof_on: true,
        dio_prof_times: false,
        dio_detailed_data: true,
        dio_detail_with_content: "kernel_hash",
        dio_detail_with_arg_paths: true,
        dio_detail_with_sock_addr: true,
        dio_detail_with_sock_data: true,
      }

# -------- ELK

- name: DIO ({{ groups['node'] | length }} ES - raw)
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/dio, when: caches_clean, tags: ['never','dio_elk_raw'],
        setup_res_dir: "t01_dio_{{ groups['node'] | length }}ES_raw",
        dio_eswriter_enabled: true,
        dio_filewriter_enabled: false,
        dio_tareget_events: ["all"],
        dio_wait_timeout: -1,
        dio_prof_on: true,
        dio_prof_times: false,
        dio_detailed_data: false
      }

- name: DIO ({{ groups['node'] | length }} ES - detailed)
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/dio, when: caches_clean, tags: ['never','dio_elk_detailed'],
        setup_res_dir: "t02_dio_{{ groups['node'] | length }}ES_detailed",
        dio_eswriter_enabled: true,
        dio_filewriter_enabled: false,
        dio_tareget_events: ["all"],
        dio_wait_timeout: -1,
        dio_prof_on: true,
        dio_prof_times: false,
        dio_detailed_data: true,
        dio_detail_with_content: "off",
        dio_detail_with_arg_paths: false,
        dio_detail_with_sock_addr: false,
        dio_detail_with_sock_data: false,
      }

- name: DIO ({{ groups['node'] | length }} ES - detailed_paths)
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/dio, when: caches_clean, tags: ['never','dio_elk_detailed_paths'],
        setup_res_dir: "t03_dio_{{ groups['node'] | length }}ES_detailed_paths",
        dio_eswriter_enabled: true,
        dio_filewriter_enabled: false,
        dio_tareget_events: ["all"],
        dio_wait_timeout: -1,
        dio_prof_on: true,
        dio_prof_times: false,
        dio_detailed_data: true,
        dio_detail_with_content: "off",
        dio_detail_with_arg_paths: true,
        dio_detail_with_sock_addr: false,
        dio_detail_with_sock_data: false,
      }

- name: DIO ({{ groups['node'] | length }} ES - detailed_all)
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/dio, when: caches_clean, tags: ['never','dio_elk_detailed_all'],
        setup_res_dir: "t04_dio_{{ groups['node'] | length }}ES_detailed_all",
        dio_eswriter_enabled: true,
        dio_filewriter_enabled: false,
        dio_tareget_events: ["all"],
        dio_wait_timeout: -1,
        dio_prof_on: true,
        dio_prof_times: false,
        dio_detailed_data: true,
        dio_detail_with_content: "off",
        dio_detail_with_arg_paths: true,
        dio_detail_with_sock_addr: true,
        dio_detail_with_sock_data: true,
      }

- name: DIO ({{ groups['node'] | length }} ES - detailed_all_plain)
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/dio, when: caches_clean, tags: ['never','dio_elk_detailed_all_plain'],
        setup_res_dir: "t05_dio_{{ groups['node'] | length }}ES_detailed_all_plain",
        dio_eswriter_enabled: true,
        dio_filewriter_enabled: false,
        dio_tareget_events: ["all"],
        dio_wait_timeout: -1,
        dio_prof_on: true,
        dio_prof_times: false,
        dio_detailed_data: true,
        dio_detail_with_content: "plain",
        dio_detail_with_arg_paths: true,
        dio_detail_with_sock_addr: true,
        dio_detail_with_sock_data: true,
      }

- name: DIO ({{ groups['node'] | length }} ES - detailed_all_khash)
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/dio, when: caches_clean, tags: ['never','dio_elk_detailed_all_khash'],
        setup_res_dir: "t06_dio_{{ groups['node'] | length }}ES_detailed_all_khash",
        dio_eswriter_enabled: true,
        dio_filewriter_enabled: false,
        dio_tareget_events: ["all"],
        dio_wait_timeout: -1,
        dio_prof_on: true,
        dio_prof_times: false,
        dio_detailed_data: true,
        dio_detail_with_content: "kernel_hash",
        dio_detail_with_arg_paths: true,
        dio_detail_with_sock_addr: true,
        dio_detail_with_sock_data: true,
      }


# ------PROFILING

# -------- NULL

- name: DIO (NULL - raw) - Profiling ON
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/dio, when: caches_clean, tags: ['never','dio_null_profiling_raw'],
        setup_res_dir: "t01_dio_null_profiling_raw",
        dio_eswriter_enabled: false,
        dio_filewriter_enabled: false,
        dio_tareget_events: ["all"],
        dio_wait_timeout: -1,
        dio_prof_on: true,
        dio_prof_times: true,
        dio_detailed_data: false
      }

- name: DIO (NULL - detailed) - Profiling ON
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/dio, when: caches_clean, tags: ['never','dio_null_profiling_detailed'],
        setup_res_dir: "t02_dio_null_profiling_detailed",
        dio_eswriter_enabled: false,
        dio_filewriter_enabled: false,
        dio_tareget_events: ["all"],
        dio_wait_timeout: -1,
        dio_prof_on: true,
        dio_prof_times: true,
        dio_detailed_data: true,
        dio_detail_with_content: "off",
        dio_detail_with_arg_paths: false,
        dio_detail_with_sock_addr: false,
        dio_detail_with_sock_data: false,
      }

- name: DIO (NULL - detailed_paths) - Profiling ON
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/dio, when: caches_clean, tags: ['never','dio_null_profiling_detailed_paths'],
        setup_res_dir: "t03_dio_null_profiling_detailed_paths",
        dio_eswriter_enabled: false,
        dio_filewriter_enabled: false,
        dio_tareget_events: ["all"],
        dio_wait_timeout: -1,
        dio_prof_on: true,
        dio_prof_times: true,
        dio_detailed_data: true,
        dio_detail_with_content: "off",
        dio_detail_with_arg_paths: true,
        dio_detail_with_sock_addr: false,
        dio_detail_with_sock_data: false,
      }

- name: DIO (NULL - detailed_all) - Profiling ON
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/dio, when: caches_clean, tags: ['never','dio_null_profiling_detailed_all'],
        setup_res_dir: "t04_dio_null_profiling_detailed_all",
        dio_eswriter_enabled: false,
        dio_filewriter_enabled: false,
        dio_tareget_events: ["all"],
        dio_wait_timeout: -1,
        dio_prof_on: true,
        dio_prof_times: true,
        dio_detailed_data: true,
        dio_detail_with_content: "off",
        dio_detail_with_arg_paths: true,
        dio_detail_with_sock_addr: true,
        dio_detail_with_sock_data: true,
      }

- name: DIO (NULL - detailed_all_plain) - Profiling ON
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/dio, when: caches_clean, tags: ['never','dio_null_profiling_detailed_all_plain'],
        setup_res_dir: "t05_dio_null_profiling_detailed_all_plain",
        dio_eswriter_enabled: false,
        dio_filewriter_enabled: false,
        dio_tareget_events: ["all"],
        dio_wait_timeout: -1,
        dio_prof_on: true,
        dio_prof_times: true,
        dio_detailed_data: true,
        dio_detail_with_content: "plain",
        dio_detail_with_arg_paths: true,
        dio_detail_with_sock_addr: true,
        dio_detail_with_sock_data: true,
      }

- name: DIO (NULL - detailed_all_khash) - Profiling ON
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/dio, when: caches_clean, tags: ['never','dio_null_profiling_detailed_all_khash'],
        setup_res_dir: "t06_dio_null_profiling_detailed_all_khash",
        dio_eswriter_enabled: false,
        dio_filewriter_enabled: false,
        dio_tareget_events: ["all"],
        dio_wait_timeout: -1,
        dio_prof_on: true,
        dio_prof_times: true,
        dio_detailed_data: true,
        dio_detail_with_content: "kernel_hash",
        dio_detail_with_arg_paths: true,
        dio_detail_with_sock_addr: true,
        dio_detail_with_sock_data: true,
      }

# -------- FILE

- name: DIO (File - raw) - Profiling ON
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/dio, when: caches_clean, tags: ['never','dio_file_profiling_raw'],
        setup_res_dir: "t01_dio_file_profiling_raw",
        dio_eswriter_enabled: false,
        dio_filewriter_enabled: true,
        dio_tareget_events: ["all"],
        dio_wait_timeout: -1,
        dio_prof_on: true,
        dio_prof_times: true,
        dio_detailed_data: false
      }

- name: DIO (File - detailed) - Profiling ON
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/dio, when: caches_clean, tags: ['never','dio_file_profiling_detailed'],
        setup_res_dir: "t02_dio_file_profiling_detailed",
        dio_eswriter_enabled: false,
        dio_filewriter_enabled: true,
        dio_tareget_events: ["all"],
        dio_wait_timeout: -1,
        dio_prof_on: true,
        dio_prof_times: true,
        dio_detailed_data: true,
        dio_detail_with_content: "off",
        dio_detail_with_arg_paths: false,
        dio_detail_with_sock_addr: false,
        dio_detail_with_sock_data: false,
      }

- name: DIO (File - detailed_paths) - Profiling ON
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/dio, when: caches_clean, tags: ['never','dio_file_profiling_detailed_paths'],
        setup_res_dir: "t03_dio_file_profiling_detailed_paths",
        dio_eswriter_enabled: false,
        dio_filewriter_enabled: true,
        dio_tareget_events: ["all"],
        dio_wait_timeout: -1,
        dio_prof_on: true,
        dio_prof_times: true,
        dio_detailed_data: true,
        dio_detail_with_content: "off",
        dio_detail_with_arg_paths: true,
        dio_detail_with_sock_addr: false,
        dio_detail_with_sock_data: false,
      }

- name: DIO (File - detailed_all) - Profiling ON
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/dio, when: caches_clean, tags: ['never','dio_file_profiling_detailed_all'],
        setup_res_dir: "t04_dio_file_profiling_detailed_all",
        dio_eswriter_enabled: false,
        dio_filewriter_enabled: true,
        dio_tareget_events: ["all"],
        dio_wait_timeout: -1,
        dio_prof_on: true,
        dio_prof_times: true,
        dio_detailed_data: true,
        dio_detail_with_content: "off",
        dio_detail_with_arg_paths: true,
        dio_detail_with_sock_addr: true,
        dio_detail_with_sock_data: true,
      }

- name: DIO (File - detailed_all_plain) - Profiling ON
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/dio, when: caches_clean, tags: ['never','dio_file_profiling_detailed_all_plain'],
        setup_res_dir: "t05_dio_file_profiling_detailed_all_plain",
        dio_eswriter_enabled: false,
        dio_filewriter_enabled: true,
        dio_tareget_events: ["all"],
        dio_wait_timeout: -1,
        dio_prof_on: true,
        dio_prof_times: true,
        dio_detailed_data: true,
        dio_detail_with_content: "plain",
        dio_detail_with_arg_paths: true,
        dio_detail_with_sock_addr: true,
        dio_detail_with_sock_data: true,
      }

- name: DIO (File - detailed_all_khash) - Profiling ON
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/dio, when: caches_clean, tags: ['never','dio_file_profiling_detailed_all_khash'],
        setup_res_dir: "t06_dio_file_profiling_detailed_all_khash",
        dio_eswriter_enabled: false,
        dio_filewriter_enabled: true,
        dio_tareget_events: ["all"],
        dio_wait_timeout: -1,
        dio_prof_on: true,
        dio_prof_times: true,
        dio_detailed_data: true,
        dio_detail_with_content: "kernel_hash",
        dio_detail_with_arg_paths: true,
        dio_detail_with_sock_addr: true,
        dio_detail_with_sock_data: true,
      }

# -------- ELK

- name: DIO ({{ groups['node'] | length }} ES - raw) - Profiling ON
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/dio, when: caches_clean, tags: ['never','dio_elk_profiling_raw'],
        setup_res_dir: "t01_dio_{{ groups['node'] | length }}ES_profiling_raw",
        dio_eswriter_enabled: true,
        dio_filewriter_enabled: false,
        dio_tareget_events: ["all"],
        dio_wait_timeout: -1,
        dio_prof_on: true,
        dio_prof_times: true,
        dio_detailed_data: false
      }

- name: DIO ({{ groups['node'] | length }} ES - detailed) - Profiling ON
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/dio, when: caches_clean, tags: ['never','dio_elk_profiling_detailed'],
        setup_res_dir: "t02_dio_{{ groups['node'] | length }}ES_profiling_detailed",
        dio_eswriter_enabled: true,
        dio_filewriter_enabled: false,
        dio_tareget_events: ["all"],
        dio_wait_timeout: -1,
        dio_prof_on: true,
        dio_prof_times: true,
        dio_detailed_data: true,
        dio_detail_with_content: "off",
        dio_detail_with_arg_paths: false,
        dio_detail_with_sock_addr: false,
        dio_detail_with_sock_data: false,
      }

- name: DIO ({{ groups['node'] | length }} ES - detailed_paths) - Profiling ON
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/dio, when: caches_clean, tags: ['never','dio_elk_profiling_detailed_paths'],
        setup_res_dir: "t03_dio_{{ groups['node'] | length }}ES_profiling_detailed_paths",
        dio_eswriter_enabled: true,
        dio_filewriter_enabled: false,
        dio_tareget_events: ["all"],
        dio_wait_timeout: -1,
        dio_prof_on: true,
        dio_prof_times: true,
        dio_detailed_data: true,
        dio_detail_with_content: "off",
        dio_detail_with_arg_paths: true,
        dio_detail_with_sock_addr: false,
        dio_detail_with_sock_data: false,
      }

- name: DIO ({{ groups['node'] | length }} ES - detailed_all) - Profiling ON
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/dio, when: caches_clean, tags: ['never','dio_elk_profiling_detailed_all'],
        setup_res_dir: "t04_dio_{{ groups['node'] | length }}ES_profiling_detailed_all",
        dio_eswriter_enabled: true,
        dio_filewriter_enabled: false,
        dio_tareget_events: ["all"],
        dio_wait_timeout: -1,
        dio_prof_on: true,
        dio_prof_times: true,
        dio_detailed_data: true,
        dio_detail_with_content: "off",
        dio_detail_with_arg_paths: true,
        dio_detail_with_sock_addr: true,
        dio_detail_with_sock_data: true,
      }

- name: DIO ({{ groups['node'] | length }} ES - detailed_all_plain) - Profiling ON
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/dio, when: caches_clean, tags: ['never','dio_elk_profiling_detailed_all_plain'],
        setup_res_dir: "t05_dio_{{ groups['node'] | length }}ES_profiling_detailed_all_plain",
        dio_eswriter_enabled: true,
        dio_filewriter_enabled: false,
        dio_tareget_events: ["all"],
        dio_wait_timeout: -1,
        dio_prof_on: true,
        dio_prof_times: true,
        dio_detailed_data: true,
        dio_detail_with_content: "plain",
        dio_detail_with_arg_paths: true,
        dio_detail_with_sock_addr: true,
        dio_detail_with_sock_data: true,
      }

- name: DIO ({{ groups['node'] | length }} ES - detailed_all_khash) - Profiling ON
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/dio, when: caches_clean, tags: ['never','dio_elk_profiling_detailed_all_khash'],
        setup_res_dir: "t06_dio_{{ groups['node'] | length }}ES_profiling_detailed_all_khash",
        dio_eswriter_enabled: true,
        dio_filewriter_enabled: false,
        dio_tareget_events: ["all"],
        dio_wait_timeout: -1,
        dio_prof_on: true,
        dio_prof_times: true,
        dio_detailed_data: true,
        dio_detail_with_content: "kernel_hash",
        dio_detail_with_arg_paths: true,
        dio_detail_with_sock_addr: true,
        dio_detail_with_sock_data: true,
      }


# ------FILTERS

- name: DIO ({{ groups['node'] | length }} ES - detailed_filter_tid)
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/dio, when: caches_clean, tags: ['never','dio_elk_detailed_filter_tid'],
        setup_res_dir: "t07_dio_{{ groups['node'] | length }}ES_detailed_filter_tid",
        dio_eswriter_enabled: true,
        dio_filewriter_enabled: false,
        dio_tareget_events: ["all"],
        filter_tid: true,
        dio_wait_timeout: -1,
        dio_prof_on: true,
        dio_prof_times: false,
        dio_detailed_data: true,
        dio_detail_with_content: "off",
        dio_detail_with_arg_paths: false,
        dio_detail_with_sock_addr: false,
        dio_detail_with_sock_data: false,
      }

- name: DIO ({{ groups['node'] | length }} ES - detailed_filter_orwc)
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/dio, when: caches_clean, tags: ['never','dio_elk_detailed_filter_orwc'],
        setup_res_dir: "t08_dio_{{ groups['node'] | length }}ES_detailed_filter_orwc",
        dio_eswriter_enabled: true,
        dio_filewriter_enabled: false,
        dio_tareget_events: ["open","openat","read","pread64","readv","write","pwrite64","writev","close"],
        filter_tid: true,
        dio_wait_timeout: -1,
        dio_prof_on: true,
        dio_prof_times: false,
        dio_detailed_data: true,
        dio_detail_with_content: "off",
        dio_detail_with_arg_paths: false,
        dio_detail_with_sock_addr: false,
        dio_detail_with_sock_data: false,
      }

- name: DIO ({{ groups['node'] | length }} ES - detailed_filter_read)
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/dio, when: caches_clean, tags: ['never','dio_elk_detailed_filter_read'],
        setup_res_dir: "t09_dio_{{ groups['node'] | length }}ES_detailed_filter_read",
        dio_eswriter_enabled: true,
        dio_filewriter_enabled: false,
        dio_tareget_events: ["read"],
        filter_tid: true,
        dio_wait_timeout: -1,
        dio_prof_on: true,
        dio_prof_times: false,
        dio_detailed_data: true,
        dio_detail_with_content: "off",
        dio_detail_with_arg_paths: false,
        dio_detail_with_sock_addr: false,
        dio_detail_with_sock_data: false,
      }

- name: DIO ({{ groups['node'] | length }} ES - detailed_filter_stat)
  hosts: test
  gather_facts: no
  become: no
  roles:
    - { role: tests/filebench/dio, when: caches_clean, tags: ['never','dio_elk_detailed_filter_stat'],
        setup_res_dir: "t10_dio_{{ groups['node'] | length }}ES_detailed_filter_stat",
        dio_eswriter_enabled: true,
        dio_filewriter_enabled: false,
        dio_tareget_events: ["stat"],
        filter_tid: true,
        dio_wait_timeout: -1,
        dio_prof_on: true,
        dio_prof_times: false,
        dio_detailed_data: true,
        dio_detail_with_content: "off",
        dio_detail_with_arg_paths: false,
        dio_detail_with_sock_addr: false,
        dio_detail_with_sock_data: false,
      }

# ------
